<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Deployman ‚Ä¢ Tech/DevOps/Dados</title>
  <meta name="description" content="Publica√ß√µes e curiosidades sobre DevOps, tecnologia, dados e seguran√ßa." />
  <style>
    body { background-color: #0a0f1f; color: #e6f0ff; font-family: Arial, sans-serif; margin: 0; }
    header, footer { background-color: #10172a; padding: 10px 20px; }
    nav a { color: #7aa2ff; margin: 0 10px; text-decoration: none; }
    nav a:hover { color: #00e5ff; }
    .wrap { max-width: 1100px; margin: auto; padding: 20px; }
    h2 { border-bottom: 1px solid rgba(122,162,255,.25); padding-bottom: 5px; }
    .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); gap: 16px; }
    .card { background: #10172a; padding: 16px; border-radius: 8px; border: 1px solid rgba(122,162,255,.15); }
    .meta { font-size: 0.85rem; color: #a8b3cf; }
    .empty { opacity: .7; text-align: center; padding: 18px; }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Deployman</h1>
      <nav>
        <a href="#posts">Posts</a>
        <a href="#curiosidades">Curiosidades</a>
        <a href="#sobre">Sobre</a>
        <a href="#contato">Contato</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section id="posts">
      <h2>üìù Posts</h2>
      <div id="postsList" class="cards"></div>
      <div id="postsEmpty" class="empty" hidden>Sem posts ainda.</div>
    </section>

    <section id="curiosidades">
      <h2>üí° Curiosidades</h2>
      <div id="curiList" class="cards"></div>
      <div id="curiEmpty" class="empty" hidden>Nenhuma curiosidade publicada ainda.</div>
    </section>

    <section id="sobre">
      <h2>üë§ Sobre mim</h2>
      <p><strong>Alexandre Santos</strong> ‚Äî DevOps, Kubernetes, AWS, observabilidade, automa√ß√£o e seguran√ßa. Compartilhando experi√™ncias, guias e notas r√°pidas.</p>
    </section>

    <section id="contato">
      <h2>‚úâÔ∏è Contato</h2>
      <p>Prefere falar direto? <a id="mailto" href="mailto:seuemail@exemplo.com?subject=Contato%20via%20Deployman">Enviar e-mail</a>.</p>
    </section>
  </main>

  <footer>
    <div class="wrap">
      <div class="meta">¬© <span id="year"></span> Deployman ‚Ä¢ Feito com ‚ô• e GitHub Pages.</div>
    </div>
  </footer>

  <script>
    const OWNER = "alexandretho"; // seu usu√°rio
    const REPO  = "deployman-site"; // seu reposit√≥rio
    const PER_PAGE = 30;

    const $ = (q)=>document.querySelector(q);
    const el = (tag,cls)=>{ const e=document.createElement(tag); if(cls) e.className=cls; return e };
    const fmtDate = (iso)=> new Date(iso).toLocaleDateString('pt-BR', {year:'numeric',month:'short',day:'2-digit'});

    async function fetchIssuesByLabel(labels){
      const labList = Array.isArray(labels) ? labels : [labels];
      const seen = new Map();
      for(const lab of labList){
        const url = new URL(`https://api.github.com/repos/${OWNER}/${REPO}/issues`);
        url.searchParams.set('state','open');
        url.searchParams.set('labels', lab);
        url.searchParams.set('per_page', PER_PAGE);
        const res = await fetch(url, {headers: {"Accept":"application/vnd.github+json"}});
        if(!res.ok) {
          console.error(`Erro ao buscar label ${lab}:`, res.status);
          continue;
        }
        const items = await res.json();
        for(const i of items){ if(i.pull_request) continue; seen.set(i.number, i); }
      }
      return [...seen.values()];
    }

    function cardForIssue(i){
      const card = el('article','card');
      const h = el('h3'); h.textContent = i.title;
      const meta = el('div','meta');
      const tags = (i.labels||[]).map(l => typeof l === 'string' ? l : l.name).join(', ');
      meta.textContent = `${fmtDate(i.created_at)} ‚Ä¢ ${tags}`;
      const p = el('p'); p.innerHTML = (i.body || '').slice(0, 220) + (i.body && i.body.length>220?'‚Ä¶':'');
      const more = el('a'); more.href = i.html_url; more.target='_blank'; more.rel='noopener'; more.textContent = 'Ler no GitHub';
      card.append(h, meta, p, more);
      return card;
    }

    function renderList(container, emptyEl, issues){
      container.innerHTML = '';
      if(!issues.length){ emptyEl.hidden = false; return }
      emptyEl.hidden = true;
      issues.forEach(i => container.appendChild(cardForIssue(i)));
    }

    async function boot(){
      document.getElementById('year').textContent = new Date().getFullYear();
      try{
        const [posts, curis] = await Promise.all([
          fetchIssuesByLabel(['post','posts']),
          fetchIssuesByLabel(['curiosidade','curiosidades'])
        ]);
        renderList($('#postsList'), $('#postsEmpty'), posts);
        renderList($('#curiList'), $('#curiEmpty'), curis);
      }catch(e){
        console.error('Erro no boot:', e);
        $('#postsEmpty').hidden = false; $('#curiEmpty').hidden = false;
      }
    }

    boot();
  </script>
</body>
</html>
